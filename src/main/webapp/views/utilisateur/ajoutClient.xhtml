<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>
<body>
	<header>
	<p align="center">
		<h:graphicImage library="img" name="logoDTA.png" />
		<br />
	</p>
	</header>
	<menu>
		<!-- MENU -->
		<ui:include src="/menu.xhtml" />
	</menu>
	<br />

	<!-- fin menu -->
	<h:form id="clientForm">
		<p:fieldset legend="Création d'un Utilisateur" toggleable="false"
			toggleSpeed="500" id="panelGeneral">


			<p:fieldset legend="Information Personnelle" toggleable="false"
				toggleSpeed="500" id="panelpersonnel">
				<h:panelGrid columns="4" cellpadding="5">
					<p:outputLabel value="Nom : " for="NomInput" />
					<p:inputText id="NomInput" value="#{ajoutClientBean.nom}"
						type="text" required="true" />

					<p:outputLabel value="Prenom : " for="PrenomInput" />
					<p:inputText id="PrenomInput" value="#{ajoutClientBean.prenom}"
						type="text" required="true" />

					<p:outputLabel for="CivilitéInput " value="Civilité :" />
					<p:selectOneMenu id="CivilitéInput"
						value="#{ajoutClientBean.titre}" style="width:150px">
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItem itemLabel="Monsieur" itemValue="Monsieur" />
						<f:selectItem itemLabel="Madame" itemValue="Madame" />
						<f:selectItem itemLabel="Mademoiselle" itemValue="Mademoiselle" />
					</p:selectOneMenu>

					<p:outputLabel value="Telephone : " for="telephoneInput" />
					<p:inputText id="telephoneInput"
						value="#{ajoutClientBean.telephone}" type="tel" />
				</h:panelGrid>
			</p:fieldset>

			<p:fieldset legend="Liste des Adresses" toggleable="false"
				toggleSpeed="500" id="panelAdresses">
				<p:dataList id="listeAdresses" value="#{ajoutClientBean.adresses}"
					var="adresse">
					<h:outputText value="#{adresse.codePostal}" />
				</p:dataList>
				<p:toolbar>
					<f:facet name="left">
						<p:commandButton value="Ajouter adresse" immediate="true"
							onclick="PF('dlgadress').show()" />
					</f:facet>
					<f:facet name="right">
						<p:commandButton action="#{ajoutClientBean.cleanAdresses()}"
							value="Effacer" immediate="true" />
					</f:facet>
				</p:toolbar>
			</p:fieldset>


			<p:fieldset legend="Donnée du Profil" toggleable="false"
				toggleSpeed="500" id="panelprofil">
				<h:panelGrid columns="3" cellpadding="5">

					<p:outputLabel value="Login : " for="loginInput" />
					<p:inputText id="loginInput" value="#{ajoutClientBean.login}"
						type="text" required="true">
						<f:ajax event="blur" render="LoginMessage" />
						<f:validator binding="#{existenceLoginValidator}" />
					</p:inputText>
					<p:message id="LoginMessage" for="loginInput" errorClass="erreur" />
				</h:panelGrid>
				<h:panelGrid columns="2" cellpadding="5">
					<p:outputLabel for="ResponsabilitéInput "
						value="Type Utilisateur :" />
					<p:selectOneMenu id="ResponsabilitéInput"
						value="#{ajoutClientBean.typeUtil}" style="width:150px">
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItem itemLabel="Administrateur" itemValue="a" />
						<f:selectItem itemLabel="Moderateur" itemValue="m" />
						<f:selectItem itemLabel="Client" itemValue="c" />
					</p:selectOneMenu>
				</h:panelGrid>
				<h:panelGrid columns="3" cellpadding="5">
					<p:outputLabel value="Email : " for="EmailInput" />
					<p:inputText id="EmailInput" value="#{ajoutClientBean.email}"
						type="email" required="true">
						<f:ajax event="blur" render="emailMessage" />
						<f:validator binding="#{existenceEmailValidator}" />
					</p:inputText>
					<p:message id="emailMessage" for="EmailInput" errorClass="erreur" />
				</h:panelGrid>

				<!-- Gestion PassWord -->

				<h:panelGrid columns="2" id="matchGrid" cellpadding="5">
					<p:outputLabel for="pwd1" value="Password: *" />
					<p:password id="pwd1" value="#{ajoutClientBean.password}"
						match="pwd2" label="Password 1" required="true" />

					<p:outputLabel for="pwd2" value="Réecrire Password: *" />
					<p:password id="pwd2" value="#{ajoutClientBean.password}"
						label="Password 2" required="true" />
				</h:panelGrid>
			</p:fieldset>
		</p:fieldset>
		<p:toolbar>
			<f:facet name="left">
				<p:commandButton action="#{ajoutClientBean.save()}"
					value="Enregistrer">
				</p:commandButton>
			</f:facet>
			<f:facet name="right">
				<p:commandButton value="Effacer" style="margin-right:20px;">
					<p:ajax update="panelGeneral" resetValues="true" />
				</p:commandButton>
			</f:facet>
		</p:toolbar>
	</h:form>
</body>

<p:dialog header="Dialog" widgetVar="dlgadress" dynamic="true">
	<h:form>
		<p:fieldset legend="Détails de l'adresse" toggleable="false"
			toggleSpeed="500" id="detailsAdresse">
			<h:panelGrid columns="2" cellpadding="5">
				<p:outputLabel value="Pays : " for="PaysInput" />
				<p:inputText id="PaysInput" value="#{ajoutAdresseBean.pays}"
					type="text" required="true" />

				<p:outputLabel value="Departement : " for="DepartementInput" />
				<p:inputText id="DepartementInput"
					value="#{ajoutAdresseBean.departement}" type="text" required="true" />

				<p:outputLabel value="Ville : " for="VilleInput" />
				<p:inputText id="VilleInput" value="#{ajoutAdresseBean.ville}"
					type="text" required="true" />

				<p:outputLabel value="CodePostal : " for="CodePostalInput" />
				<p:inputText id="CodePostalInput"
					value="#{ajoutAdresseBean.codePostal}" type="text" required="true" />

				<p:outputLabel value="Numero de rue : " for="NumeroRueInput" />
				<p:inputText id="NumeroRueInput" value="#{ajoutAdresseBean.num}"
					type="text" required="true" />

				<p:outputLabel value="Nom de la rue : " for="NomRueInput" />
				<p:inputText id="NomRueInput" value="#{ajoutAdresseBean.rue}"
					type="text" required="true" />
			</h:panelGrid>
		</p:fieldset>
		<p:toolbar>
			<f:facet name="left">
				<p:commandButton action="#{ajoutAdresseBean.save()}"
					value="Enregistrer" />
			</f:facet>
			<f:facet name="right">
				<p:commandButton value="Effacer" style="margin-right:20px;">
					<p:ajax update="detailsAdresse" resetValues="true" />
				</p:commandButton>
			</f:facet>
		</p:toolbar>
	</h:form>
</p:dialog>

<p:dialog header="Client Ajoute" widgetVar="dlgClientAjoute"
	dynamic="true">
	YYYYYYAAAAA!!!!!
</p:dialog>
<p:dialog header="Adresse Erreur" widgetVar="dlgAdresseErreur"
	dynamic="true">
	Probleme de serveur, Adresse non enregistré
</p:dialog>
<p:dialog header="Accès refusé" widgetVar="dlgErreurAuth" dynamic="true">
	Vous devez posséder les droits administrateur pour ajouter un nouvel administrateur !
</p:dialog>

</html>


